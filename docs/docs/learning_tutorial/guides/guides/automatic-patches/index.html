<!DOCTYPE html>
<html lang="en" dir="ltr">
<head><script src="/hydra-docs-v2/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=hydra-docs-v2/livereload" data-no-instant defer></script>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Using iteration and conditionals to create patches # by geikha
Note # For this tutorial we&rsquo;ll be assuming you&rsquo;ve already learned by your own means what iteration and conditionals are in a programming context.
Iteration : automatically generate patches # As you may know from regular programming, or other creative coding environments such as p5, iteration helps us repeat some operation(s) many times to achieve a specific goal. Maybe you would like to layer many similar objects but with slightly different values, and you want so many of them that writing each one manually isn&rsquo;t desirable.">
<meta name="theme-color" content="#FFFFFF">
<meta name="color-scheme" content="light dark"><meta property="og:title" content="Iteration: automatically generate patches" />
<meta property="og:description" content="Using iteration and conditionals to create patches # by geikha
Note # For this tutorial we&rsquo;ll be assuming you&rsquo;ve already learned by your own means what iteration and conditionals are in a programming context.
Iteration : automatically generate patches # As you may know from regular programming, or other creative coding environments such as p5, iteration helps us repeat some operation(s) many times to achieve a specific goal. Maybe you would like to layer many similar objects but with slightly different values, and you want so many of them that writing each one manually isn&rsquo;t desirable." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/hydra-docs-v2/docs/learning_tutorial/guides/guides/automatic-patches/" /><meta property="article:section" content="docs" />

<meta property="article:modified_time" content="2023-11-20T16:19:06+01:00" />

<title>Iteration: automatically generate patches | hydra video synth</title>
<link rel="manifest" href="/hydra-docs-v2/manifest.json">
<link rel="icon" href="/hydra-docs-v2/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/hydra-docs-v2/book.min.9bac9dc478cf52ca962a4f35e004c2cdc70a5461e7451956af25f951f9749ded.css" integrity="sha256-m6ydxHjPUsqWKk814ATCzccKVGHnRRlWryX5Ufl0ne0=" crossorigin="anonymous">
  <script defer src="/hydra-docs-v2/flexsearch.min.js"></script>
  <script defer src="/hydra-docs-v2/en.search.min.3f0bed049a5592f5f43fd6d6e8cd9c2eceb3f7b6f07548b60a5c9d8d19caea1e.js" integrity="sha256-PwvtBJpVkvX0P9bW6M2cLs6z97bwdUi2ClydjRnK6h4=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  <link
rel="stylesheet"
href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.2/codemirror.min.css"
integrity="sha512-MWdvo/Qqcf4pY1ecQUB1uBn0qLp19U/qJ1Rpp2BDZeuBA7YsFEwkvqR/+aG4BroPiAYDunKJ6X8R/Pmdt3p7oA=="
crossorigin="anonymous"
/>
<link
rel="stylesheet"
href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.2/addon/hint/show-hint.min.css"
crossorigin="anonymous"
/>
<link
rel="stylesheet"
href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.2/theme/paraiso-dark.min.css"
crossorigin="anonymous"
/>
<script src="https://cdn.jsdelivr.net/npm/torus-dom/dist/index.min.js"></script>
<script
src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.2/codemirror.min.js"
crossorigin="anonymous"
></script>
<script
src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.2/mode/javascript/javascript.min.js"
crossorigin="anonymous"
></script>
<script
src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.2/addon/hint/javascript-hint.min.js"
crossorigin="anonymous"
></script>
<script
src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.2/addon/hint/show-hint.min.js"
crossorigin="anonymous"
></script>
<script
src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.2/addon/selection/mark-selection.min.js"
crossorigin="anonymous"
></script>
<script
src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.2/addon/comment/comment.min.js"
crossorigin="anonymous"
></script>
<script src="https://cdn.jsdelivr.net/npm/hydra-synth/dist/hydra-synth.js"></script>
<script src="http://localhost:1313/hydra-docs-v2//js/hydra-torus-editor.js"></script>
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/hydra-docs-v2/"><span>hydra video synth</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>



  



  
    
  
    
  



<ul class="book-languages">
  <li>
    <input type="checkbox" id="languages" class="toggle" />
    <label for="languages" class="flex justify-between">
      <a role="button" class="flex align-center">
        <img src="/hydra-docs-v2/svg/translate.svg" class="book-icon" alt="Languages" />
        English
      </a>
    </label>

    <ul>
      
      <li>
        <a href="http://localhost:1313/hydra-docs-v2/ja/">
          日本語
        </a>
      </li>
      
      <li>
        <a href="http://localhost:1313/hydra-docs-v2/pt/">
          Portuguese | Português
        </a>
      </li>
      
    </ul>
  </li>
</ul>











  



  
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/hydra-docs-v2/docs/quick-start/" class="">quick start</a>
  

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <input type="checkbox" id="section-632bd1ffdbcae04a1b0f08fa1dd878c0" class="toggle"  />
    <label for="section-632bd1ffdbcae04a1b0f08fa1dd878c0" class="flex justify-between">
      <a href="/hydra-docs-v2/docs/learning/" class="">learning</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/hydra-docs-v2/docs/learning/getting-started/" class="">getting started</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/hydra-docs-v2/docs/learning/web-editor/" class="">web editor</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-abc558a55caa3a21197cd84f6409f58d" class="toggle"  />
    <label for="section-abc558a55caa3a21197cd84f6409f58d" class="flex justify-between">
      <a href="/hydra-docs-v2/docs/learning/video-synth-basics/" class="">video synth basics</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/hydra-docs-v2/docs/learning/video-synth-basics/src/" class="">sources</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/hydra-docs-v2/docs/learning/video-synth-basics/outputs/" class="">outputs</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/hydra-docs-v2/docs/learning/video-synth-basics/transforms/" class="">transforms</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/hydra-docs-v2/docs/learning/video-synth-basics/blending/" class="">blending</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/hydra-docs-v2/docs/learning/video-synth-basics/modulate/" class="">modulation</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/hydra-docs-v2/docs/learning/video-synth-basics/settings/" class="">settings &amp; state</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/hydra-docs-v2/docs/learning/external-sources/" class="">external sources</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-eca88cb65a773793437f0e9114baf99c" class="toggle"  />
    <label for="section-eca88cb65a773793437f0e9114baf99c" class="flex justify-between">
      <a href="/hydra-docs-v2/docs/learning/sequencing/" class="">sequencing</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/hydra-docs-v2/docs/learning/sequencing/arrays/" class="">arrays</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/hydra-docs-v2/docs/learning/sequencing/arrow-functions/" class="">arrow functions</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-9e9c592a536d885dc59f7d3443e5419c" class="toggle"  />
    <label for="section-9e9c592a536d885dc59f7d3443e5419c" class="flex justify-between">
      <a href="/hydra-docs-v2/docs/learning/interactivity/" class="">interactivity</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/hydra-docs-v2/docs/learning/interactivity/mouse/" class="">mouse</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/hydra-docs-v2/docs/learning/interactivity/audio/" class="">audio</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/hydra-docs-v2/docs/learning/interactivity/midi/" class="">midi</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-d32e8d2211a8b3a4c95f10e7889e9b44" class="toggle"  />
    <label for="section-d32e8d2211a8b3a4c95f10e7889e9b44" class="flex justify-between">
      <a role="button" class="">extending</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/hydra-docs-v2/docs/learning/extending-hydra/extensions/" class="">extensions</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/hydra-docs-v2/docs/learning/extending-hydra/extending-hydra/" class="">other libraries</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/hydra-docs-v2/docs/learning/extending-hydra/glsl/" class="">custom glsl</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-8afa17f34011c70734ab422498c11155" class="toggle"  />
    <label for="section-8afa17f34011c70734ab422498c11155" class="flex justify-between">
      <a href="/hydra-docs-v2/docs/learning/extending-hydra/contributing/" class="">developing &amp; contributing</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/hydra-docs-v2/docs/learning/extending-hydra/contributing/editor/" class="">editor</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/hydra-docs-v2/docs/learning/extending-hydra/contributing/synth/" class="">developing hydra-synth</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/hydra-docs-v2/docs/learning/extending-hydra/contributing/server/" class="">backend server</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-5a7f0265de67bb55990b78cc970db95f" class="toggle"  />
    <label for="section-5a7f0265de67bb55990b78cc970db95f" class="flex justify-between">
      <a href="/hydra-docs-v2/docs/learning/guides/" class="">guides</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/hydra-docs-v2/docs/learning/guides/javascript/" class="">JavaScript for Hydra users</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/hydra-docs-v2/docs/learning/guides/automatic-patches/" class="">Iteration &amp; generative patches</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/hydra-docs-v2/docs/learning/guides/frames-and-timing/" class="">Updating frames &amp; precise timing</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/hydra-docs-v2/docs/learning/guides/textures/" class="">Textures [Hydra Book]</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/hydra-docs-v2/docs/learning/guides/audio/" class="">Audio-reactivity explained</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/hydra-docs-v2/docs/learning/guides/event-listeners/" class="">Clicks &amp; keys</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-0eb140a6ac0de442b2f42574663cfb56" class="toggle"  />
    <label for="section-0eb140a6ac0de442b2f42574663cfb56" class="flex justify-between">
      <a role="button" class="">How to...</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/hydra-docs-v2/docs/learning/guides/how-to/hydra-in-a-webpage/" class="">Embed Hydra on your webpage</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/hydra-docs-v2/docs/learning/guides/how-to/record-hydra-output/" class="">Record Hydra&#39;s output</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/hydra-docs-v2/docs/learning/guides/how-to/use-hydra-without-showing-code/" class="">Use Hydra without showing the code</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/hydra-docs-v2/docs/reference/" class="">reference</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/hydra-docs-v2/docs/community/" class="">community</a>
  

        </li>
      
    
  </ul>











  
<ul>
  
  <li>
    <a href="/hydra-docs-v2/posts/"  >
        blog
      </a>
  </li>
  
  <li>
    <a href="https://opencollective.com/hydra-synth"  target="_blank" rel="noopener">
        contribute
      </a>
  </li>
  
  <li>
    <a href="https://hydra.ojack.xyz/grants"  target="_blank" rel="noopener">
        grants
      </a>
  </li>
  
</ul>






</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/hydra-docs-v2/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Iteration: automatically generate patches</strong>

  <label for="toc-control">
    
    <img src="/hydra-docs-v2/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li></li>
        <li><a href="#iteration--automatically-generate-patches">Iteration : automatically generate patches</a></li>
        <li><a href="#conditionals">Conditionals</a></li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="using-iteration-and-conditionals-to-create-patches">
  Using iteration and conditionals to create patches
  <a class="anchor" href="#using-iteration-and-conditionals-to-create-patches">#</a>
</h1>
<hr>
<p>by geikha</p>
<h5 id="note">
  Note
  <a class="anchor" href="#note">#</a>
</h5>
<p>For this tutorial we&rsquo;ll be assuming you&rsquo;ve already learned by your own means what iteration and conditionals are in a programming context.</p>
<h3 id="iteration--automatically-generate-patches">
  Iteration : automatically generate patches
  <a class="anchor" href="#iteration--automatically-generate-patches">#</a>
</h3>
<p>As you may know from regular programming, or other creative coding environments such as p5, iteration helps us repeat some operation(s) many times to achieve a specific goal. Maybe you would like to layer many similar objects but with slightly different values, and you want so many of them that writing each one manually isn&rsquo;t desirable. Maybe you want to have some form of very specific feedbacks, etc.
Let&rsquo;s jump straight into some examples.</p>
<h4 id="for-loops">
  for loops
  <a class="anchor" href="#for-loops">#</a>
</h4>
<p>For loops that generate patches can be used inside or outside functions, but we will be sticking with the latter for convenience.</p>
<p>The typical structure of a patch-generating for loop is as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">someFunction</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">iterations</span>) =&gt; {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">accumulator</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">osc</span>(); <span style="color:#75715e">// first part of the patch, a source
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  	<span style="color:#66d9ef">for</span>(<span style="color:#a6e22e">i</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">iterations</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>){ <span style="color:#75715e">// i is also called a &#34;counter`
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    	<span style="color:#a6e22e">accumulator</span>.<span style="color:#a6e22e">someTransform</span>(<span style="color:#a6e22e">i</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">accumulator</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">someFunction</span>(<span style="color:#ae81ff">5</span>).<span style="color:#a6e22e">out</span>()
</span></span></code></pre></div><p>Of course this is just a useful example, and your code may end up looking very different depending on what crazy ideas you want to try. But let&rsquo;s use this as a starting point. See how the use of a function allows us to reuse this iterative process with different parameters such as the amount of iterations. Also note how we start the counter variable <code>i</code> on the value <code>1</code> instead of the typical <code>0</code>. Since <code>0</code> will usually null an effect, the result will be equal to the first value assigned our accumulator, so we can skip the <code>0</code> iteration altogether. For those not familiar with the abbreviation <code>i++</code>, this basically means <code>i+=1</code>, which means <code>i = i+1</code>.</p>
<h5 id="example-rotating">
  Example: rotating
  <a class="anchor" href="#example-rotating">#</a>
</h5>
<div class="hydra-example">
    
    <div></div>
    <script>
        
       
       
    
        var preEl = document.currentScript.previousElementSibling
       
        
        
        var originalCode = "// 'nest' is only a creative, arbitrary name\nnest = (freq,div) =\u003e {\n    nest = osc(freq,.02); step = Math.PI*2/div\n    for(r = step; r\u003cMath.PI*2; r+=step)\n            nest.diff(osc(freq,.02).rotate(r))\n    return nest;\n}\nnest(30,4).out()"
        var codeApp = new CodeApp();
        preEl.insertAdjacentElement("afterend", codeApp.node);
        
        codeApp.cmApp.loaded(originalCode);
            
        preEl.style.display = "none";
    </script>
</div><p>Here we want to see how it would look like if we grab an oscillator of a given <code>freq</code> frequency, and calculate the <code>diff</code> between other rotated oscillators of the same frequency. To achieve that, we define our accumulator <code>nest</code> with the initial value of <code>osc(freq,.02)</code>. Then, we define a <code>step</code> which will be how many radians the oscillator will rotate. We calculate this as a division of 2pi (a full 360° turn) by some <code>div</code> number. Then we iterate over <code>nest</code>, applying the <code>diff</code> and the effect respectively, and adding a <code>step</code> to our counter <code>r</code> each iteration.</p>
<h5 id="example-very-specific-feedback">
  Example: very specific feedback
  <a class="anchor" href="#example-very-specific-feedback">#</a>
</h5>
<div class="hydra-example">
    
    <div></div>
    <script>
        
       
       
    
        var preEl = document.currentScript.previousElementSibling
       
        
        
        var originalCode = "feedbacks = (q) =\u003e {\n    result = noise(4).luma(-.1);\n    for(i = 1; i\u003cq; i++)\n        result.modulate(src(o0).scale(1/(i)),.03*i)\n    return result;\n}\nfeedbacks(5)\n    .out()"
        var codeApp = new CodeApp();
        preEl.insertAdjacentElement("afterend", codeApp.node);
        
        codeApp.cmApp.loaded(originalCode);
            
        preEl.style.display = "none";
    </script>
</div><h5 id="example-layering-varying-circles">
  Example: layering varying circles
  <a class="anchor" href="#example-layering-varying-circles">#</a>
</h5>
<div class="hydra-example">
    
    <div></div>
    <script>
        
       
       
    
        var preEl = document.currentScript.previousElementSibling
       
        
        
        var originalCode = "screenRatio = () =\u003e 1 // innerHeight/innerWidth // this only makes sense in the editor\ncircle = () =\u003e shape(64,.9,.1).scale(1,screenRatio).luma().color(1,.1,.2)\ntunnel = (q=5) =\u003e {\n    tunnel = circle();\n    for(i=1; i\u003cq; i++){\n        nextCircle = circle()\n                        .invert(i%2) // inverts every other iteration\n                        .hue(.01*i)\n                        .scale(0.85**i);\n        tunnel.layer(nextCircle);\n    }\n    return tunnel;\n}\ntunnel(8)\n    .out()"
        var codeApp = new CodeApp();
        preEl.insertAdjacentElement("afterend", codeApp.node);
        
        codeApp.cmApp.loaded(originalCode);
            
        preEl.style.display = "none";
    </script>
</div><p>Try adding or changing the transforms that happen to every <code>nextCircle</code> and see how drastically yet easily they can change the visuals. Specially using transforms like <code>repeatX</code>.
Still, always keep in mind while using iteration, that the more effects and iterations you add, the heavier the sketch will be to process.</p>
<h4 id="foreach-map-and-reduce">
  .forEach, .map and .reduce
  <a class="anchor" href="#foreach-map-and-reduce">#</a>
</h4>
<p>Those familiar with more array focused programming languages such as Python or Haskell, or more functional structures even inside JavaScript, may be used to iterating using the <code>forEach</code>, <code>map</code> and/or <code>reduce</code> structures. Where given an Array, we use each value to alter something or to reduce the entire Array into a desired result.
Practically anything done with these functions can be done using <code>for</code> loops, so if you are new to these or you just don&rsquo;t like how they look, then there really is no need for you to learn these, even if you&rsquo;re super interested in iteration.</p>
<h5 id="foreach">
  .forEach
  <a class="anchor" href="#foreach">#</a>
</h5>
<p>Structures using <code>.forEach</code> are quite useful for those who&rsquo;d like to generate patches from predefined data. Here&rsquo;s an example using the ASCII values of a given string:</p>
<div class="hydra-example">
    
    <div></div>
    <script>
        
       
       
    
        var preEl = document.currentScript.previousElementSibling
       
        
        
        var originalCode = "text = \"Hydra :)\"\narr = Array.from(text).map(char =\u003e {return char.charCodeAt()})\nresult = solid()\narr.forEach(ascii =\u003e {\n\tresult.add(\n\t\tshape(4,.2,.5).luma(.6,.3)\n      \t\t.color(1,0,0).hue(ascii/100)\n      \t\t.scrollX(.4+ascii/100)\n      \t\t.rotate(Math.PI*ascii/100)\n    \t,.4)\n})\nresult.out()"
        var codeApp = new CodeApp();
        preEl.insertAdjacentElement("afterend", codeApp.node);
        
        codeApp.cmApp.loaded(originalCode);
            
        preEl.style.display = "none";
    </script>
</div><p>Try changing the text, and remember not to use very long strings given they will be quite heavy to process.</p>
<h5 id="reduce">
  .reduce
  <a class="anchor" href="#reduce">#</a>
</h5>
<p>Using <code>.reduce</code> is quite useful when you have an array of textures. Here&rsquo;s a simple example:</p>
<div class="hydra-example">
    
    <div></div>
    <script>
        
       
       
    
        var preEl = document.currentScript.previousElementSibling
       
        
        
        var originalCode = "vs = [noise(), osc(), voronoi(), gradient()];\nresult = () =\u003e vs.reduce((prev,curr)=\u003e {\n\treturn prev.diff(curr)\n\t},solid())\nresult().out()"
        var codeApp = new CodeApp();
        preEl.insertAdjacentElement("afterend", codeApp.node);
        
        codeApp.cmApp.loaded(originalCode);
            
        preEl.style.display = "none";
    </script>
</div><h5 id="map">
  .map
  <a class="anchor" href="#map">#</a>
</h5>
<p>Haters of state (non-political) will prefer <code>.map</code> any day over <code>.forEach</code>. Looking at the example for <code>.forEach</code>, we see were creating a texture and adding it to an accumulator <em>for each</em> element in the Array. We can separate the texture generating part of the code and the blending part using <code>.map</code> to get an array of textures and <code>.reduce</code> to blend them:</p>
<div class="hydra-example">
    
    <div></div>
    <script>
        
       
       
    
        var preEl = document.currentScript.previousElementSibling
       
        
        
        var originalCode = "text = \"Hydra \u003e:]\"\narr = Array.from(text).map(char =\u003e {return char.charCodeAt()})\narr = arr.map(ascii =\u003e \n\tshape(4,.2,.5).luma(.6,.3)\n      \t\t.color(1,0,0).hue(ascii/100)\n      \t\t.scrollX(.4+ascii/100)\n      \t\t.rotate(Math.PI*ascii/100)\n)\nresult = arr.reduce((prev,curr)=\u003eprev.add(curr,.4),solid())\nresult.out()"
        var codeApp = new CodeApp();
        preEl.insertAdjacentElement("afterend", codeApp.node);
        
        codeApp.cmApp.loaded(originalCode);
            
        preEl.style.display = "none";
    </script>
</div><h3 id="conditionals">
  Conditionals
  <a class="anchor" href="#conditionals">#</a>
</h3>
<p>Conditionals aren&rsquo;t very useful on their own here, given all code execution on Hydra happens arbitrarily and manually via the interaction of the user. The only case you would want to use an <code>if</code> statement by its own while livecoding Hydra is that where you&rsquo;d like some variable to change given some condition and only at the time of each code evaluation. But even still, you&rsquo;ll see that putting any conditionals inside functions will be the most useful approach because of code reusability and readability. Let&rsquo;s get to it.</p>
<h4 id="conditionals-in-functions">
  Conditionals in functions
  <a class="anchor" href="#conditionals-in-functions">#</a>
</h4>
<p>We know from previous tutorials we can make our own functions to be used as arguments of Hydra sources and transforms, and how Hydra evaluates these functions each frame. Here&rsquo;s an example where we use conditionals to have a hue change happen only during 3 seconds out of every 10 seconds:</p>
<div class="hydra-example">
    
    <div></div>
    <script>
        
       
       
    
        var preEl = document.currentScript.previousElementSibling
       
        
        
        var originalCode = "hueChange = () =\u003e {\n    if(time%10 \u003c 3)\n        return time/2\n    else\n        return 0\n}\nosc(20,.1,2.6)\n\t.modulate(osc(20).rotate(Math.PI/2),.3)\n\t.hue(hueChange)\n\t.out()"
        var codeApp = new CodeApp();
        preEl.insertAdjacentElement("afterend", codeApp.node);
        
        codeApp.cmApp.loaded(originalCode);
            
        preEl.style.display = "none";
    </script>
</div><p>Another common use of conditionals in programming is to avoid errors or undesired behaviors. Here&rsquo;s a simple example where we wrap the square root function from the Math API into our own <code>sqrt</code> function which turns any negative input into positive:</p>
<div class="hydra-example">
    
    <div></div>
    <script>
        
       
       
    
        var preEl = document.currentScript.previousElementSibling
       
        
        
        var originalCode = "sqrt = (n) =\u003e {\n\tif(n\u003c0) n*=-1; //if negative, multiply by -1\n  \treturn Math.sqrt(n)\n}\nnoise(2)\n\t.diff(noise(2).scale(()=\u003esqrt(Math.sin(time/2))))\n\t.out()"
        var codeApp = new CodeApp();
        preEl.insertAdjacentElement("afterend", codeApp.node);
        
        codeApp.cmApp.loaded(originalCode);
            
        preEl.style.display = "none";
    </script>
</div><h4 id="the-ternary-operator">
  The ternary operator
  <a class="anchor" href="#the-ternary-operator">#</a>
</h4>
<p>Before we go forward and use both iteration and conditionals, we&rsquo;d like to show you the ternary operator. This operator can simplify many conditional operations. The syntax is the following:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">x</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">condition</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">valueIfTrue</span> <span style="color:#f92672">:</span> <span style="color:#a6e22e">valueIfFalse</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// which is the same as
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">if</span>(<span style="color:#a6e22e">condition</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">x</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">valueIfTrue</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">x</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">valueIfFalse</span>
</span></span></code></pre></div><p>Now we can simplify the hue change example into:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">osc</span>(<span style="color:#ae81ff">20</span>,.<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2.6</span>)
</span></span><span style="display:flex;"><span>	.<span style="color:#a6e22e">modulate</span>(<span style="color:#a6e22e">osc</span>(<span style="color:#ae81ff">20</span>).<span style="color:#a6e22e">rotate</span>(Math.<span style="color:#a6e22e">PI</span><span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>),.<span style="color:#ae81ff">3</span>)
</span></span><span style="display:flex;"><span>	.<span style="color:#a6e22e">hue</span>(()=&gt; <span style="color:#a6e22e">time</span><span style="color:#f92672">%</span><span style="color:#ae81ff">10</span><span style="color:#f92672">&lt;</span><span style="color:#ae81ff">3</span> <span style="color:#f92672">?</span> <span style="color:#a6e22e">time</span><span style="color:#f92672">/</span><span style="color:#ae81ff">2</span> <span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>	.<span style="color:#a6e22e">out</span>()
</span></span></code></pre></div><h4 id="conditionals-inside-iterations">
  Conditionals inside iterations
  <a class="anchor" href="#conditionals-inside-iterations">#</a>
</h4>
<p>Let&rsquo;s go back to a previous example, the nest, where we wanted to do many <code>diff</code> using the same oscillator many times with different angles of rotation. Here&rsquo;s a new version where we invert the colors of the first half of oscillators, and we apply colorama to the oscillator in every other iteration.</p>
<div class="hydra-example">
    
    <div></div>
    <script>
        
       
       
    
        var preEl = document.currentScript.previousElementSibling
       
        
        
        var originalCode = "// 'nest' is only a creative, arbitrary name\nnest = (freq,div) =\u003e {\n  \tnest = osc(freq,.02); step = Math.PI*2/div\n\tfor(i = 1; i\u003cdiv; i++){\n      r = i*step;\n      nextOsc = osc(freq,.02).rotate(r);\n      if(r\u003cMath.PI) nextOsc.invert();\n      nest.diff(nextOsc);\n      if(i%2==0) nest.colorama(.06) \n    }\n  \treturn nest;\n}\nnest(15,6).out()"
        var codeApp = new CodeApp();
        preEl.insertAdjacentElement("afterend", codeApp.node);
        
        codeApp.cmApp.loaded(originalCode);
            
        preEl.style.display = "none";
    </script>
</div><p>The first change you&rsquo;ll notice is that now we&rsquo;re calculating the angle of rotation <code>r</code> inside the iteration, and for that we now use a regular counter such as <code>i</code>. We can get the exact same angle of rotation as before via multiplying the counter by the step. We do this specifically because if we want to have something happen every other condition, we&rsquo;ll need to know if the number of iteration we&rsquo;re in is even or not. This is what happens at <code>if(i%2==0)</code>.
However we still make use of <code>r</code> inside of the first conditional, <code>if(r&lt;Math.PI)</code>. This will result in about half of the oscillators to be inverted, given Math.PI is half a turn.</p>
<hr>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">


  <div><a class="flex align-center" href="https://github.com/hydra-synth/hydra-docs-v2/commit/1dd27b0a5f5ca9dcec9e0cccc27657c0a09cf72d" title='Last modified by ojack | November 20, 2023' target="_blank" rel="noopener">
      <img src="/hydra-docs-v2/svg/calendar.svg" class="book-icon" alt="Calendar" />
      <span>November 20, 2023</span>
    </a>
  </div>



  <div>
    <a class="flex align-center" href="https://github.com/hydra-synth/hydra-docs-v2/edit/main/content/docs/learning_tutorial/guides/guides/automatic-patches.md" target="_blank" rel="noopener">
      <img src="/hydra-docs-v2/svg/edit.svg" class="book-icon" alt="Edit" />
      <span>Edit this page</span>
    </a>
  </div>


</div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li></li>
        <li><a href="#iteration--automatically-generate-patches">Iteration : automatically generate patches</a></li>
        <li><a href="#conditionals">Conditionals</a></li>
      </ul>
    </li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












