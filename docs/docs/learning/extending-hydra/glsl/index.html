<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="custom glsl # Using custom GLSL functions # Hydra is built using GLSL (a language for generating a program, or shader, that runs directly on the graphics card using WebGl). Each javascript function in hydra corresponds directly to a snippet of shader code. There are four possible types in hydra: src, coord (geometry), combine (blend), combineCoord (modulate). Each string of functions is composited based on its type into a single string of fragment shader code.">
<meta name="theme-color" content="#FFFFFF">
<meta name="color-scheme" content="light dark"><meta property="og:title" content="custom glsl" />
<meta property="og:description" content="custom glsl # Using custom GLSL functions # Hydra is built using GLSL (a language for generating a program, or shader, that runs directly on the graphics card using WebGl). Each javascript function in hydra corresponds directly to a snippet of shader code. There are four possible types in hydra: src, coord (geometry), combine (blend), combineCoord (modulate). Each string of functions is composited based on its type into a single string of fragment shader code." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://hydra.ojack.xyz/docs/docs/learning/extending-hydra/glsl/" /><meta property="article:section" content="docs" />

<meta property="article:modified_time" content="2025-06-10T12:59:47-03:00" />

<title>custom glsl | hydra video synth</title>
<link rel="manifest" href="/docs/manifest.json">
<link rel="icon" href="/docs/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/docs/book.min.9bac9dc478cf52ca962a4f35e004c2cdc70a5461e7451956af25f951f9749ded.css" integrity="sha256-m6ydxHjPUsqWKk814ATCzccKVGHnRRlWryX5Ufl0ne0=" crossorigin="anonymous">
  <script defer src="/docs/flexsearch.min.js"></script>
  <script defer src="/docs/en.search.min.cd7d8d297f2cd7af2e324f19c201fa31d3d82009065e2c5825f67d53c44b94e2.js" integrity="sha256-zX2NKX8s168uMk8ZwgH6MdPYIAkGXixYJfZ9U8RLlOI=" crossorigin="anonymous"></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->
  <link
rel="stylesheet"
href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.2/codemirror.min.css"
integrity="sha512-MWdvo/Qqcf4pY1ecQUB1uBn0qLp19U/qJ1Rpp2BDZeuBA7YsFEwkvqR/+aG4BroPiAYDunKJ6X8R/Pmdt3p7oA=="
crossorigin="anonymous"
/>
<link
rel="stylesheet"
href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.2/addon/hint/show-hint.min.css"
crossorigin="anonymous"
/>
<link
rel="stylesheet"
href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.2/theme/paraiso-dark.min.css"
crossorigin="anonymous"
/>
<script src="https://cdn.jsdelivr.net/npm/torus-dom/dist/index.min.js"></script>
<script
src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.2/codemirror.min.js"
crossorigin="anonymous"
></script>
<script
src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.2/mode/javascript/javascript.min.js"
crossorigin="anonymous"
></script>
<script
src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.2/addon/hint/javascript-hint.min.js"
crossorigin="anonymous"
></script>
<script
src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.2/addon/hint/show-hint.min.js"
crossorigin="anonymous"
></script>
<script
src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.2/addon/selection/mark-selection.min.js"
crossorigin="anonymous"
></script>
<script
src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.59.2/addon/comment/comment.min.js"
crossorigin="anonymous"
></script>
<script src="https://cdn.jsdelivr.net/npm/hydra-synth/dist/hydra-synth.js"></script>
<script src="https://hydra.ojack.xyz/docs//js/hydra-torus-editor.js"></script>
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        
  <nav>
<h2 class="book-brand">
  <a class="flex align-center" href="/docs/"><span>hydra video synth</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>



  



  
    
  
    
  



<ul class="book-languages">
  <li>
    <input type="checkbox" id="languages" class="toggle" />
    <label for="languages" class="flex justify-between">
      <a role="button" class="flex align-center">
        <img src="/docs/svg/translate.svg" class="book-icon" alt="Languages" />
        English
      </a>
    </label>

    <ul>
      
      <li>
        <a href="https://hydra.ojack.xyz/docs/ja/">
          日本語
        </a>
      </li>
      
      <li>
        <a href="https://hydra.ojack.xyz/docs/pt/">
          Portuguese | Português
        </a>
      </li>
      
    </ul>
  </li>
</ul>











  



  
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/docs/quick-start/" class="">quick start</a>
  

        </li>
      
    
      
        <li class="book-section-flat" >
          
  
  

  
    <input type="checkbox" id="section-632bd1ffdbcae04a1b0f08fa1dd878c0" class="toggle" checked />
    <label for="section-632bd1ffdbcae04a1b0f08fa1dd878c0" class="flex justify-between">
      <a href="/docs/docs/learning/" class="">learning</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/docs/learning/getting-started/" class="">getting started</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/docs/learning/web-editor/" class="">web editor</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-abc558a55caa3a21197cd84f6409f58d" class="toggle"  />
    <label for="section-abc558a55caa3a21197cd84f6409f58d" class="flex justify-between">
      <a href="/docs/docs/learning/video-synth-basics/" class="">video synth basics</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/docs/learning/video-synth-basics/src/" class="">sources</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/docs/learning/video-synth-basics/outputs/" class="">outputs</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/docs/learning/video-synth-basics/transforms/" class="">transforms</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/docs/learning/video-synth-basics/blending/" class="">blending</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/docs/learning/video-synth-basics/modulate/" class="">modulation</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/docs/learning/video-synth-basics/settings/" class="">settings &amp; state</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/docs/learning/external-sources/" class="">external sources</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-eca88cb65a773793437f0e9114baf99c" class="toggle"  />
    <label for="section-eca88cb65a773793437f0e9114baf99c" class="flex justify-between">
      <a href="/docs/docs/learning/sequencing/" class="">sequencing</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/docs/learning/sequencing/arrays/" class="">arrays</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/docs/learning/sequencing/arrow-functions/" class="">arrow functions</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-9e9c592a536d885dc59f7d3443e5419c" class="toggle"  />
    <label for="section-9e9c592a536d885dc59f7d3443e5419c" class="flex justify-between">
      <a href="/docs/docs/learning/interactivity/" class="">interactivity</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/docs/learning/interactivity/mouse/" class="">mouse</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/docs/learning/interactivity/audio/" class="">audio</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/docs/learning/interactivity/midi/" class="">midi</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-d32e8d2211a8b3a4c95f10e7889e9b44" class="toggle" checked />
    <label for="section-d32e8d2211a8b3a4c95f10e7889e9b44" class="flex justify-between">
      <a role="button" class="">extending</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/docs/learning/extending-hydra/extensions/" class="">extensions</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/docs/learning/extending-hydra/extending-hydra/" class="">other libraries</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/docs/learning/extending-hydra/glsl/" class="active">custom glsl</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-8afa17f34011c70734ab422498c11155" class="toggle"  />
    <label for="section-8afa17f34011c70734ab422498c11155" class="flex justify-between">
      <a href="/docs/docs/learning/extending-hydra/contributing/" class="">developing &amp; contributing</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/docs/learning/extending-hydra/contributing/editor/" class="">editor</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/docs/learning/extending-hydra/contributing/synth/" class="">developing hydra-synth</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/docs/learning/extending-hydra/contributing/server/" class="">backend server</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-5a7f0265de67bb55990b78cc970db95f" class="toggle"  />
    <label for="section-5a7f0265de67bb55990b78cc970db95f" class="flex justify-between">
      <a href="/docs/docs/learning/guides/" class="">guides</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/docs/learning/guides/javascript/" class="">JavaScript for Hydra users</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/docs/learning/guides/automatic-patches/" class="">Iteration &amp; generative patches</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/docs/learning/guides/frames-and-timing/" class="">Updating frames &amp; precise timing</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/docs/learning/guides/textures/" class="">Textures [Hydra Book]</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/docs/learning/guides/audio/" class="">Audio-reactivity explained</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/docs/learning/guides/event-listeners/" class="">Clicks &amp; keys</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <input type="checkbox" id="section-0eb140a6ac0de442b2f42574663cfb56" class="toggle"  />
    <label for="section-0eb140a6ac0de442b2f42574663cfb56" class="flex justify-between">
      <a role="button" class="">How to...</a>
    </label>
  

          
  <ul>
    
      
        <li>
          
  
  

  
    <a href="/docs/docs/learning/guides/how-to/hydra-in-a-webpage/" class="">Embed Hydra on your webpage</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/docs/learning/guides/how-to/record-hydra-output/" class="">Record Hydra&#39;s output</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/docs/learning/guides/how-to/use-hydra-without-showing-code/" class="">Use Hydra without showing the code</a>
  

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
  </ul>

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/docs/reference/" class="">reference</a>
  

        </li>
      
    
      
        <li>
          
  
  

  
    <a href="/docs/docs/community/" class="">community</a>
  

        </li>
      
    
  </ul>











  
<ul>
  
  <li>
    <a href="/docs/posts/"  >
        blog
      </a>
  </li>
  
  <li>
    <a href="https://opencollective.com/hydra-synth"  target="_blank" rel="noopener">
        contribute
      </a>
  </li>
  
  <li>
    <a href="https://hydra.ojack.xyz/grants"  target="_blank" rel="noopener">
        grants
      </a>
  </li>
  
</ul>






</nav>




  <script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>


 
      </div>
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/docs/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>custom glsl</strong>

  <label for="toc-control">
    
    <img src="/docs/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#using-custom-glsl-functions">Using custom GLSL functions</a></li>
    <li><a href="#setfunction">setFunction</a>
      <ul>
        <li><a href="#example">Example</a></li>
      </ul>
    </li>
    <li><a href="#types-of-glsl-functions-and-their-arguments">Types of GLSL functions and their arguments</a>
      <ul>
        <li><a href="#src">src</a></li>
        <li><a href="#color">color</a></li>
        <li><a href="#coord">coord</a></li>
        <li><a href="#combine">combine</a></li>
        <li><a href="#combinecoord">combineCoord</a></li>
      </ul>
    </li>
    <li><a href="#built-in-functions">Built-in functions</a>
      <ul>
        <li><a href="#_luminance">_luminance</a></li>
        <li><a href="#hsv-functions">HSV functions</a></li>
      </ul>
    </li>
    <li><a href="#example-1">Example</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#glsl-injection">GLSL Injection</a></li>
    <li><a href="#extensions">Extensions</a>
      <ul>
        <li><a href="#extra-shaders">Extra shaders</a></li>
        <li><a href="#extra-functionality">Extra Functionality</a></li>
      </ul>
    </li>
  </ul>
</nav>



  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="custom-glsl">
  custom glsl
  <a class="anchor" href="#custom-glsl">#</a>
</h1>
<h2 id="using-custom-glsl-functions">
  Using custom GLSL functions
  <a class="anchor" href="#using-custom-glsl-functions">#</a>
</h2>
<p>Hydra is built using GLSL (a language for generating a program, or shader, that runs directly on the graphics card using WebGl). Each javascript function in hydra corresponds directly to a snippet of shader code. There are four possible types in hydra: src, coord (geometry), combine (blend), combineCoord (modulate). Each string of functions is composited based on its type into a single string of fragment shader code.</p>
<p>You can see the glsl for each existing hydra function in <a href="https://github.com/hydra-synth/hydra-synth/blob/main/src/glsl/glsl-functions.js">glsl-functions.js</a> of the hydra source code.</p>
<p>You can see the fragment shader code generated by a chain of functions in hydra, by replacing the <code>.out()</code> in a function chain with <code>.glsl()</code>, and then logging the results.</p>
<p>For example, <code>console.log(osc().glsl()[0])</code> will show the fragment shader generates by <code>osc()</code> in the browser console.</p>
<hr>
<h2 id="setfunction">
  setFunction
  <a class="anchor" href="#setfunction">#</a>
</h2>
<p>The hydra-synth API includes a function called <code>setFunction</code> which lets you dynamically add a function with custom GLSL and custom name, and use it elsewhere in the code.</p>
<ul>
<li><code>name</code> is a String with the name for the function</li>
<li><code>type</code> is one of the available types of functions (&lsquo;src&rsquo;, &lsquo;color&rsquo;, &lsquo;coord&rsquo;, &lsquo;combine&rsquo;, &lsquo;combineCoord&rsquo;, explained below)</li>
<li><code>inputs</code> is an Array of objects each with it&rsquo;s own <code>name</code>, <code>type</code> and <code>default</code> properties. These become the arguments of the generated GLSL function.</li>
<li><code>glsl</code> is a String with the glsl code.</li>
</ul>
<h3 id="example">
  Example
  <a class="anchor" href="#example">#</a>
</h3>
<p>For example, the following code:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">setFunction</span>({
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;gradient2&#39;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;src&#39;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">inputs</span><span style="color:#f92672">:</span> [
</span></span><span style="display:flex;"><span>    {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;float&#39;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;speed&#39;</span>,
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">default</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">0</span>,
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  ],
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">glsl</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">`   return vec4(sin(time*speed), _st, 1.0);`</span>
</span></span><span style="display:flex;"><span>})
</span></span></code></pre></div><p>Will generate the following GLSL function:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-glsl" data-lang="glsl"><span style="display:flex;"><span><span style="color:#66d9ef">vec4</span> gradient2(<span style="color:#66d9ef">vec2</span> _st, <span style="color:#66d9ef">float</span> speed){
</span></span><span style="display:flex;"><span> <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">vec4</span>(sin(time<span style="color:#f92672">*</span>speed), _st, <span style="color:#ae81ff">1.0</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>That is then usable in Hydra via <code>gradient2().out()</code></p>
<div class="hydra-example">
    
    <div></div>
    <script>
        
       
       
    
        var preEl = document.currentScript.previousElementSibling
       
        
        
        var originalCode = "setFunction({\n  name: 'gradient2',\n  type: 'src',\n  inputs: [\n    {\n      type: 'float',\n      name: 'speed',\n      default: 0,\n    }\n  ],\n  glsl:\n`   return vec4(sin(time*speed), _st, 1.0);`\n})\n//\ngradient2(1).out()"
        var codeApp = new CodeApp();
        preEl.insertAdjacentElement("afterend", codeApp.node);
        
        codeApp.cmApp.loaded(originalCode);
            
        preEl.style.display = "none";
    </script>
</div><hr>
<h2 id="types-of-glsl-functions-and-their-arguments">
  Types of GLSL functions and their arguments
  <a class="anchor" href="#types-of-glsl-functions-and-their-arguments">#</a>
</h2>
<p>The value in the &rsquo;type&rsquo; field lets the parser know which type of function will be returned as well as default arguments. Here&rsquo;s the reference for the different types as used inside Hydra:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">types</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#39;src&#39;</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">returnType</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;vec4&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">args</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;vec2 _st&#39;</span>]
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#39;coord&#39;</span><span style="color:#f92672">:</span> {  <span style="color:#75715e">// geometry
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">returnType</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;vec2&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">args</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;vec2 _st&#39;</span>]
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#39;color&#39;</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">returnType</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;vec4&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">args</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;vec4 _c0&#39;</span>]
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#39;combine&#39;</span><span style="color:#f92672">:</span> { <span style="color:#75715e">// blending
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">returnType</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;vec4&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">args</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;vec4 _c0&#39;</span>, <span style="color:#e6db74">&#39;vec4 _c1&#39;</span>]
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#39;combineCoord&#39;</span><span style="color:#f92672">:</span> { <span style="color:#75715e">// modulation
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#a6e22e">returnType</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;vec2&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">args</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;vec2 _st&#39;</span>, <span style="color:#e6db74">&#39;vec4 _c0&#39;</span>]
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="src">
  src
  <a class="anchor" href="#src">#</a>
</h3>
<p>A function with a specified type of <code>src</code> is one that generates visuals by its own. Just like <code>osc</code> or <code>noise</code>. They all have a <code>vec2</code> argument called <code>_st</code> for the coordinate. And you can add any custom inputs as shown above. You must return a <code>vec4</code>.</p>
<div class="hydra-example">
    
    <div></div>
    <script>
        
       
       
    
        var preEl = document.currentScript.previousElementSibling
       
        
        
        var originalCode = "setFunction({\n  name: 'myOsc',\n  type: 'src',\n  inputs: [\n    {\n      type: 'float',\n      name: 'frequency',\n      default: 60,\n    },\n{\n      type: 'float',\n      name: 'sync',\n      default: 0.1,\n    },\n{\n      type: 'float',\n      name: 'offset',\n      default: 0,\n    }\n  ],\n  glsl:\n`   vec2 st = _st;\n   float r = sin((st.x-offset/frequency+time*sync)*frequency)*0.5  + 0.5;\n   float g = sin((-st.x+time*sync*2.)*frequency)*0.5 + 0.5;\n   float b = sin((st.x+offset/frequency+time*sync)*frequency)*0.5  + 0.5;\n   return vec4(r, g, b, 1.0);`\n})\n\nmyOsc(10).out()"
        var codeApp = new CodeApp();
        preEl.insertAdjacentElement("afterend", codeApp.node);
        
        codeApp.cmApp.loaded(originalCode);
            
        preEl.style.display = "none";
    </script>
</div><h3 id="color">
  color
  <a class="anchor" href="#color">#</a>
</h3>
<p>A <code>color</code> function receives a <code>vec4</code> called <code>_c0</code> that represents the color being affected by the transform. As any function you may add any extra inputs. You must return another <code>vec4</code>.</p>
<div class="hydra-example">
    
    <div></div>
    <script>
        
       
       
    
        var preEl = document.currentScript.previousElementSibling
       
        
        
        var originalCode = "setFunction({\n    name: 'switchColors',\n    type: 'color',\n    inputs: [],\n    glsl: `\n        return _c0.brga;\n    `\n})\nosc(60,.1,5).switchColors()\n\t.out()"
        var codeApp = new CodeApp();
        preEl.insertAdjacentElement("afterend", codeApp.node);
        
        codeApp.cmApp.loaded(originalCode);
            
        preEl.style.display = "none";
    </script>
</div><h3 id="coord">
  coord
  <a class="anchor" href="#coord">#</a>
</h3>
<p>A <code>coord</code> function receives a <code>vec2</code> called <code>_st</code> that represents the coordinate plane. You must return another <code>vec2</code>.</p>
<div class="hydra-example">
    
    <div></div>
    <script>
        
       
       
    
        var preEl = document.currentScript.previousElementSibling
       
        
        
        var originalCode = "setFunction({\n    name: 'tan',\n    type: 'coord',\n    inputs: [\n      { name: 'freq', type: 'float', default: 1 },\n      { name: 'mult', type: 'float', default: 0.25 }\n    ],\n    glsl: `\n        return tan(_st*3.141592*freq)*mult;\n    `\n})\nosc(60,.1,5).tan(2)\n\t.out()"
        var codeApp = new CodeApp();
        preEl.insertAdjacentElement("afterend", codeApp.node);
        
        codeApp.cmApp.loaded(originalCode);
            
        preEl.style.display = "none";
    </script>
</div><h3 id="combine">
  combine
  <a class="anchor" href="#combine">#</a>
</h3>
<p>The functions of type <code>combine</code> receive 2 <code>vec4</code> arguments, <code>_c0</code> and <code>_c1</code>. The first one represents the texture being affected and the latter represents the texture being blended into the former. For example, when you use <code>osc().mult(noise())</code>, inside the definition of the function, <code>_c0</code> represents the <code>osc()</code> and <code>_c1</code> represents the <code>noise()</code> colors. You can think combine functions as blending modes. And as custom function you may add extra inputs as needed. You must return a <code>vec4</code>.</p>
<div class="hydra-example">
    
    <div></div>
    <script>
        
       
       
    
        var preEl = document.currentScript.previousElementSibling
       
        
        
        var originalCode = "setFunction({\n    name: 'negate',\n    type: 'combine',\n    inputs: [\n        { type: 'float', name: 'amount', default: 1 }\n    ],\n    glsl:`\n        _c1 *= amount;\n        return vec4(vec3(1.0)-abs(vec3(1.0)-_c0.rgb-_c1.rgb), min(max(_c0.a, _c1.a),1.0));\n    `\n})\nosc().negate(noise().brightness(.5))\n\t.out()"
        var codeApp = new CodeApp();
        preEl.insertAdjacentElement("afterend", codeApp.node);
        
        codeApp.cmApp.loaded(originalCode);
            
        preEl.style.display = "none";
    </script>
</div><h3 id="combinecoord">
  combineCoord
  <a class="anchor" href="#combinecoord">#</a>
</h3>
<p><code>combineCoord</code> functions change the position of colors in the texture being affected given the colors of another texture. Think about the many modulate functions for example, since they are precisely this type. They receive a <code>vec2 _st</code> and a <code>vec4 _c0</code>. You must return a <code>vec2</code>.</p>
<div class="hydra-example">
    
    <div></div>
    <script>
        
       
       
    
        var preEl = document.currentScript.previousElementSibling
       
        
        
        var originalCode = "setFunction({\n    name: 'myModulator',\n    type: 'combineCoord',\n    inputs: [],\n    glsl: `\n        return vec2(_st.x+(_c0.g-_c0.b*0.1),_st.y+(_c0.r*0.2));\n    `\n})\nnoise(2).myModulator(osc(20,.1,1).diff(o0))\n\t.out()"
        var codeApp = new CodeApp();
        preEl.insertAdjacentElement("afterend", codeApp.node);
        
        codeApp.cmApp.loaded(originalCode);
            
        preEl.style.display = "none";
    </script>
</div><hr>
<h2 id="built-in-functions">
  Built-in functions
  <a class="anchor" href="#built-in-functions">#</a>
</h2>
<p>The following functions are pre-defined for every Hydra generated shader, and in the same way that some built-in functions use them, you may too:</p>
<h3 id="_luminance">
  _luminance
  <a class="anchor" href="#_luminance">#</a>
</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-glsl" data-lang="glsl"><span style="display:flex;"><span><span style="color:#66d9ef">float</span> _luminance(<span style="color:#66d9ef">vec3</span> rgb){
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">vec3</span> W <span style="color:#f92672">=</span> <span style="color:#66d9ef">vec3</span>(<span style="color:#ae81ff">0.2125</span>, <span style="color:#ae81ff">0.7154</span>, <span style="color:#ae81ff">0.0721</span>);
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">return</span> dot(rgb, W);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Returns the luminance of a given rgb color.</p>
<h3 id="hsv-functions">
  HSV functions
  <a class="anchor" href="#hsv-functions">#</a>
</h3>
<h4 id="_rgbtohsv">
  _rgbToHsv
  <a class="anchor" href="#_rgbtohsv">#</a>
</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-glsl" data-lang="glsl"><span style="display:flex;"><span><span style="color:#66d9ef">vec3</span> _rgbToHsv(<span style="color:#66d9ef">vec3</span> c){
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">vec4</span> K <span style="color:#f92672">=</span> <span style="color:#66d9ef">vec4</span>(<span style="color:#ae81ff">0.0</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1.0</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">3.0</span>, <span style="color:#ae81ff">2.0</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">3.0</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">1.0</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">vec4</span> p <span style="color:#f92672">=</span> mix(<span style="color:#66d9ef">vec4</span>(c.bg, K.wz), <span style="color:#66d9ef">vec4</span>(c.gb, K.xy), step(c.b, c.g));
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">vec4</span> q <span style="color:#f92672">=</span> mix(<span style="color:#66d9ef">vec4</span>(p.xyw, c.r), <span style="color:#66d9ef">vec4</span>(c.r, p.yzx), step(p.x, c.r));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">float</span> d <span style="color:#f92672">=</span> q.x <span style="color:#f92672">-</span> min(q.w, q.y);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">float</span> e <span style="color:#f92672">=</span> <span style="color:#ae81ff">1.0e-10</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">vec3</span>(abs(q.z <span style="color:#f92672">+</span> (q.w <span style="color:#f92672">-</span> q.y) <span style="color:#f92672">/</span> (<span style="color:#ae81ff">6.0</span> <span style="color:#f92672">*</span> d <span style="color:#f92672">+</span> e)), d <span style="color:#f92672">/</span> (q.x <span style="color:#f92672">+</span> e), q.x);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Transforms a color from the rgb to the hsv colorspace.</p>
<h4 id="_hsvtorgb">
  _hsvToRgb
  <a class="anchor" href="#_hsvtorgb">#</a>
</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-glsl" data-lang="glsl"><span style="display:flex;"><span><span style="color:#66d9ef">vec3</span> _hsvToRgb(<span style="color:#66d9ef">vec3</span> c){
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">vec4</span> K <span style="color:#f92672">=</span> <span style="color:#66d9ef">vec4</span>(<span style="color:#ae81ff">1.0</span>, <span style="color:#ae81ff">2.0</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">3.0</span>, <span style="color:#ae81ff">1.0</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">3.0</span>, <span style="color:#ae81ff">3.0</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">vec3</span> p <span style="color:#f92672">=</span> abs(fract(c.xxx <span style="color:#f92672">+</span> K.xyz) <span style="color:#f92672">*</span> <span style="color:#ae81ff">6.0</span> <span style="color:#f92672">-</span> K.www);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> c.z <span style="color:#f92672">*</span> mix(K.xxx, clamp(p <span style="color:#f92672">-</span> K.xxx, <span style="color:#ae81ff">0.0</span>, <span style="color:#ae81ff">1.0</span>), c.y);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Transforms a color from the hsv colorspace back to rgb.</p>
<h5 id="note">
  Note
  <a class="anchor" href="#note">#</a>
</h5>
<p>As of now there is no way to define &ldquo;global&rdquo; functions such as these ones just mentioned. But expect it soon!</p>
<hr>
<h2 id="example-1">
  Example
  <a class="anchor" href="#example-1">#</a>
</h2>
<h4 id="chroma-key">
  Chroma Key
  <a class="anchor" href="#chroma-key">#</a>
</h4>
<p>This example modifies <code>color</code> to replace green background with transparency (i.e., chroma keying). The GLSL code is ported from <a href="https://www.shadertoy.com/view/XsfGzn">Inigo Quilez&rsquo;s example</a>.</p>
<div class="hydra-example">
    
    <div></div>
    <script>
        
       
       
    
        var preEl = document.currentScript.previousElementSibling
       
        
        
        var originalCode = "setFunction({\n    name: 'chroma',\n    type: 'color',\n    inputs: [\n        ],\n    glsl: `\n        float maxrb = max( _c0.r, _c0.b );\n        float k = clamp( (_c0.g-maxrb)*5.0, 0.0, 1.0 );\n        float dg = _c0.g;\n        _c0.g = min( _c0.g, maxrb*0.8 );\n        _c0 += vec4(dg - _c0.g);\n        return vec4(_c0.rgb, 1.0 - k);\n`})\n\n// s0.initCam()\n// src(s0).out(o0)\nsolid(0,1,0).layer(shape(5,0.3,0.3).luma()).out(o0)\nosc(30, 0, 1).layer(src(o0).chroma()).out(o1)\nrender()"
        var codeApp = new CodeApp();
        preEl.insertAdjacentElement("afterend", codeApp.node);
        
        codeApp.cmApp.loaded(originalCode);
            
        preEl.style.display = "none";
    </script>
</div><h4 id="polar-coordinates">
  Polar coordinates
  <a class="anchor" href="#polar-coordinates">#</a>
</h4>
<p>This example loads a <code>coord</code> function that warps a visual by interpreting its coordinates as polar.</p>
<div class="hydra-example">
    
    <div></div>
    <script>
        
       
       
    
        var preEl = document.currentScript.previousElementSibling
       
        
        
        var originalCode = "setFunction({\n  name: 'polar',\n  type: 'coord',\n  inputs: [],\n  glsl: `\n    vec2 st = _st - 0.5;\n   float r = length(st);\n   float a = atan(st.y, st.x);\n   float pi = 2.*3.1416;\n   return vec2(r*2., a/pi);`\n})\ngradient(2).add(noise(),.4).polar().out()"
        var codeApp = new CodeApp();
        preEl.insertAdjacentElement("afterend", codeApp.node);
        
        codeApp.cmApp.loaded(originalCode);
            
        preEl.style.display = "none";
    </script>
</div><hr>
<h2 id="glsl-injection">
  GLSL Injection
  <a class="anchor" href="#glsl-injection">#</a>
</h2>
<p>Since Hydra runs GLSL on the background, and everything you input into the parameters of the different functions ends up written on GLSL (be it literally or as a uniform), you can sort of hack Hydra (and totally break it) by sending strings of GLSL expressions as arguments:</p>
<div class="hydra-example">
    
    <div></div>
    <script>
        
       
       
    
        var preEl = document.currentScript.previousElementSibling
       
        
        
        var originalCode = "src(o0)\n    .scroll(()=\u003emouse.x/innerWidth,()=\u003emouse.y/innerHeight)\n    .layer(noise(3).sub(osc(5,.1,2)).luma(.1,.01))\n    .scroll(\"-sign(st.x-0.5)*0.5\",\"-sign(st.y-0.5)*0.2\")\n    .scale(\"0.8+st.x*0.2\")\n    .rotate(0,.1)\n\t.brightness(.01)\n    .out()"
        var codeApp = new CodeApp();
        preEl.insertAdjacentElement("afterend", codeApp.node);
        
        codeApp.cmApp.loaded(originalCode);
            
        preEl.style.display = "none";
    </script>
</div><p>The reason you can &ldquo;totally break Hydra&rdquo; here is that Hydra works with a modular flow. In order for it to work, when you do coordinate transforms on interconnected textures, these transforms must apply to all coordinate references in the shader. If you inject values of the <code>st</code> coordinates in your arguments, Hydra has no way of transforming them, therefore breaking the modularity.</p>
<hr>
<h2 id="extensions">
  Extensions
  <a class="anchor" href="#extensions">#</a>
</h2>
<h3 id="extra-shaders">
  Extra shaders
  <a class="anchor" href="#extra-shaders">#</a>
</h3>
<p>There are some Hydra extensions that load many custom glsl functions, such as:</p>
<ul>
<li><a href="https://gitlab.com/metagrowing/extra-shaders-for-hydra">extra-shaders-for-hydra</a></li>
<li><a href="https://github.com/ritchse/hydra-extensions">hydra-blending-modes</a></li>
</ul>
<h3 id="extra-functionality">
  Extra Functionality
  <a class="anchor" href="#extra-functionality">#</a>
</h3>
<p>The <a href="https://github.com/ritchse/hydra-extensions/blob/main/doc/hydra-glsl.md">hydra-glsl extension</a> allows you to write GLSL directly in your patches. For example:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">glsl</span>(<span style="color:#e6db74">&#39;vec4(sin(((_st.x*54.)+time*2.)*vec3(0.1,0.102,0.101)),1.0)&#39;</span>)
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">diff</span>(<span style="color:#a6e22e">o0</span>)
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">glslColor</span>(<span style="color:#e6db74">&#39;vec4(c0.brg,1.)&#39;</span>)
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">glslCoord</span>(<span style="color:#e6db74">&#39;xy*=(1.0/vec2(i0, i0)); return xy&#39;</span>,.<span style="color:#ae81ff">25</span>)
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">glslCombine</span>(<span style="color:#e6db74">&#39;c0-c1&#39;</span>,<span style="color:#a6e22e">o1</span>)
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">glslCombineCoord</span>(<span style="color:#e6db74">&#39;uv+(vec2(c0.r,c0.b)*0.1)&#39;</span>,<span style="color:#a6e22e">o1</span>)
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">out</span>()
</span></span></code></pre></div><hr>
<p>by Geikha</p>
</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">


  <div><a class="flex align-center" href="https://github.com/hydra-synth/hydra-docs-v2/commit/368f1f84eb97b3b0b109a921a6a96b4ec6252d20" title='Last modified by Renzo Torr- | June 10, 2025' target="_blank" rel="noopener">
      <img src="/docs/svg/calendar.svg" class="book-icon" alt="Calendar" />
      <span>June 10, 2025</span>
    </a>
  </div>



  <div>
    <a class="flex align-center" href="https://github.com/hydra-synth/hydra-docs-v2/edit/main/content/docs/learning/extending-hydra/glsl.md" target="_blank" rel="noopener">
      <img src="/docs/svg/edit.svg" class="book-icon" alt="Edit" />
      <span>Edit this page</span>
    </a>
  </div>


</div>



  <script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script>


 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      <div class="book-toc-content">
        
  
<nav id="TableOfContents">
  <ul>
    <li><a href="#using-custom-glsl-functions">Using custom GLSL functions</a></li>
    <li><a href="#setfunction">setFunction</a>
      <ul>
        <li><a href="#example">Example</a></li>
      </ul>
    </li>
    <li><a href="#types-of-glsl-functions-and-their-arguments">Types of GLSL functions and their arguments</a>
      <ul>
        <li><a href="#src">src</a></li>
        <li><a href="#color">color</a></li>
        <li><a href="#coord">coord</a></li>
        <li><a href="#combine">combine</a></li>
        <li><a href="#combinecoord">combineCoord</a></li>
      </ul>
    </li>
    <li><a href="#built-in-functions">Built-in functions</a>
      <ul>
        <li><a href="#_luminance">_luminance</a></li>
        <li><a href="#hsv-functions">HSV functions</a></li>
      </ul>
    </li>
    <li><a href="#example-1">Example</a>
      <ul>
        <li></li>
      </ul>
    </li>
    <li><a href="#glsl-injection">GLSL Injection</a></li>
    <li><a href="#extensions">Extensions</a>
      <ul>
        <li><a href="#extra-shaders">Extra shaders</a></li>
        <li><a href="#extra-functionality">Extra Functionality</a></li>
      </ul>
    </li>
  </ul>
</nav>


 
      </div>
    </aside>
    
  </main>

  
</body>
</html>












